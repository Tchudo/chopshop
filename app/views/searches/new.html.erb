
<div class="home-page">

  <nav class="navbar navbar-expand-sm bg-transparent justify-content-between" id="nav">

    <%= link_to "/" do %>
      <%= image_tag "lily_35.png" %>
     <% end %>

  <!-- Burger -->
  <div class="dropdown dropleft">
    <button class="btn bg-transparent border-transparent shadow-none px-1" type="button" data-toggle="dropdown"><i class="fas fa-bars fa-1x" style="color: white;"></i>
        </button>
      <% if user_signed_in? %>
        <div class="dropdown-menu rounded border-0" aria-labelledby="dropdownMenu2">
          <%= link_to baskets_path do %>
          <button class="dropdown-item" type="button">Panier</button>
          <% end %>
          <%= link_to favorites_path do %>
          <button class="dropdown-item" type="button">Favoris</button>
          <% end %>
          <%= link_to destroy_user_session_path, method: :delete do %>
          <button class="dropdown-item" type="button">Log out</button>
          <% end %>
        </div>
      <% else %>
        <div class="dropdown-menu rounded border-0" aria-labelledby="dropdownMenu2">
          <%= link_to new_user_session_path do %>
          <button class="dropdown-item" type="button">Login</button>
          <% end %>
        </div>
      <% end %>
  </div>

</nav>


<!-- Container Search -->
<div class="container my-4" id="research">
  <div class="row justify-content-center">


 <!-- Search form -->
      <div class="col-sm-12 col-lg-6">

              <div class="bg-white rounded rounded-pill d-flex p-2">

                  <%= link_to products_path do %>
                    <i class="fas fa-barcode shadow-none pt-1" style="font-size: 30px; color: #F4AA5B;"></i>
                  <%  end %>
                <div  class="flex-grow-1">

                  <%= form_tag searches_path, method: :post, autocomplete: :off, id:"search", remote: true do %>

                    <div class="d-flex justify-content-between">
                      <%= text_field_tag :query,
                        params[:query],
                        id: "myForm",
                        class:"form-control typeahead border-0 shadow-none bg-transparent align-middle",
                        placeholder: "Recherchez un produit...",
                        autofocus: "true"
                      %>

                      <%= button_tag :submit, id:"search_button", class:'border-0 shadow-none bg-transparent btn' do %>
                          <i class="fa fa-search shadow-none" style="color: #F4AA5B;"></i>
                      <% end %>
                    </div>
                  <% end %>
                </div>
             </div>
      </div>
<!-- Fin search form -->




     <!--  Affichage des produits trouvés -->
      <!-- <div class="col-sm-12 col-lg-6">
        <ul>
          <li>
            <div class="card-product rounded rounded-pill p-2 px-4">

              <i class="fas fa-history" style="font-size: 30px; color: #F4AA5B;"></i>

              <div class="card-product-infos">
                <h2><%#= link_to "Historique de mes recherches", root_path %></h2>
              </div>
            </div>
          </li>
           <li>
            <div class="card-product rounded rounded-pill px-4">
              <i class="far fa-heart" style="font-size: 30px; color: #F4AA5B;"></i>
              <div class="card-product-infos">
                <h2><%#= link_to "Recherchez dans mes favoris", root_path %></h2>
              </div>
            </div>
          </li>
        </ul>
      </div> -->

      <div class="col-sm-12 col-lg-12" id="list-results">
          <%#= render "_searches_results", products: @products %>
      </div>


  </div>
</div>

<!-- <h1>Searches#new</h1> -->

</div>


<%= form_tag searches_path, method: :post, autocomplete: :off, id:"search", remote: true do %>

                    <div class="d-flex justify-content-between">
                      <%= text_field_tag :query,
                        params[:query],
                        id: "myForm",
                        class:"form-control typeahead border-0 shadow-none bg-transparent align-middle",
                        placeholder: "Recherchez un produit...",
                        autofocus: "true"
                      %>

                      <%= button_tag :submit, id:"search_button", class:'border-0 shadow-none bg-transparent btn' do %>
                          <i class="fa fa-search shadow-none" style="color: #F4AA5B;"></i>
                      <% end %>
                    </div>
                  <% end %>
                </div>
             </div>
      </div>

<!-- Fin search form -->






   </div>

     <!--  Affichage des produits trouvés -->
      <!-- <div class="col-sm-12 col-lg-6">
        <ul>
          <li>
            <div class="card-product rounded rounded-pill p-2 px-4">

              <i class="fas fa-history" style="font-size: 30px; color: #F4AA5B;"></i>

              <div class="card-product-infos">
                <h2><%#= link_to "Historique de mes recherches", root_path %></h2>
              </div>
            </div>
          </li>
           <li>
            <div class="card-product rounded rounded-pill px-4">
              <i class="far fa-heart" style="font-size: 30px; color: #F4AA5B;"></i>
              <div class="card-product-infos">
                <h2><%#= link_to "Recherchez dans mes favoris", root_path %></h2>
              </div>
            </div>
          </li>
        </ul>
      </div> -->

      <div class="col-sm-12 col-lg-12" id="list-results">
          <%#= render "_searches_results", products: @products %>
      </div>



              <div class="container mt-5">
                <div class="row justify-content-center">
                  <div class="col-sm-12 col-lg-6">

                         <div class="lily" id="lily"></div>


                    <h1 class="text-center my-2 text-white">ChopShop!</h1>

                  </div>
                </div>
              </div>




  </div>
</div>


<div class="card-event-container display-card ">


      <% if @events.event_today? %>

        <div class="today">
          <h2>Aujourd'hui</h2>
        </div>

        <% @events.return_today_event.each do |event| %>

           <div class="card-test" >

            <div class="image-event-test" data-toggle="modal" data-target="#event<%=event.id %>" style="background-color: #F2545B">
              <div class="date-event">
                <% if event.end_date.day == event.start_date.day %>
                  <p><%= event.start_date.day  %></p>
                  <p><%= event.month %></p>
                  <p> <%= event.start_date.year %></p>
                <% else %>
                  <p><%= event.start_date.day  %> - <%= event.end_date.day %></p>
                  <p><%= event.month %></p>
                  <p> <%= event.start_date.year %></p>
                <% end %>
              </div>
            </div>

            <div class="card-info-test" data-toggle="modal" data-target="#event<%=event.id %>">
              <div class="main-info-test">
                <h3><%= event.name %></h3>
                <p><%= event.category %></p>
              </div>
              <div class="date-info-test">

                <p><%= event.start_date.day  %> <%= event.month %>  <%= event.start_date.year %></p>
              </div>
            </div>
          </div>

         <% end %>

      <% end %>

        <div class="today">
          <h2>Evènements à venir</h2>
        </div>

        <% (@events - @events.return_today_event).each do |event|  %>

          <div class="card-test">
            <div class="image-event-test" data-toggle="modal" data-target="#event<%=event.id %>" style="background-color: <%= event.month_color  %>">
              <div class="date-event">
                <% if event.end_date.day == event.start_date.day %>
                  <p><%= event.start_date.day  %></p>
                  <p><%= event.month %></p>
                  <p> <%= event.start_date.year %></p>
                <% else %>
                  <p><%= event.start_date.day  %> - <%= event.end_date.day %></p>
                  <p><%= event.month %></p>
                  <p> <%= event.start_date.year %></p>
                <% end %>
              </div>
            </div>

            <div class="card-info-test" data-toggle="modal" data-target="#event<%=event.id %>">
              <div class="main-info-test">
                <h3><%= event.name %></h3>
                <p><%= event.category %></p>
              </div>
              <div class="date-info-test">

                <p><%= event.start_date.day  %> <%= event.month %>  <%= event.start_date.year %></p>
              </div>
            </div>
          </div>

        <% end %>







</div>




<!-- MODAL -->
    <% @events.each do |event| %>
    <div class="modal fade" id="event<%= event.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content font-modal modal-content-rounded">
          <div class="modal-header">
            <div class="modal-title" id="exampleModalLongTitle">
              <%= cl_image_tag event.photo.key ,class:"img-event-modal pl-4"%>
              <h4 class="d-flex justify-content-center pt-4">
                <strong><%= event.name %></strong>
              </h4>
            </div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="d-flex justify-content-between pb-2 text-orange">
              <div>
                <% if event.start_date == event.end_date%>
                <%= "Le #{event.start_date.day} #{event.month} #{event.start_date.year}" %>
                <% else %>
                <div class="d-block">
                <p><%= "Du : #{event.start_date.day} #{event.month} #{event.start_date.year}" %></p>
                <p><%= "Au: #{event.end_date.day} #{event.month} #{event.end_date.year}" %></p>
                </div>
                <% end %>
              </div>
              <div>
                <%= event.category.capitalize %>
              </div>
            </div>
            <div class="text-orange pb-4 border-bottom">
              <i class="fas fa-map-marked-alt"></i>
              <em><%= event.address %></em>
            </div>
            <div class="pt-3">
              <%= event.description %>
            </div>
          </div>
          <div class="modal-footer d-flex justify-content-center">
            <button type="button" class="btn btn-warning text-white">J'y vais!</button>
          </div>
        </div>
      </div>
    </div>
  <%end %>





<!-- <h1>Searches#new</h1> -->

</div>


